<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="../src/css/index.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.2.0/chart.min.js"></script>
    <style>
        .chart {
            background: white;
            display: flex;
            position: relative;
        }
        
        .chart-wrap {
            width: calc(100% - 100px);
            position: relative;
        }
        
        .chart canvas {
            border: 1px solid red;
        }
        
        .chart-target {
            position: absolute;
            height: 2px;
            background: rgba(0, 0, 0, 0.1);
            width: 100%;
            bottom: 87%;
            left: 0;
            transform: translateY(1px);
        }
        
        .chart-target:after {
            content: attr(data-label);
            font-size: 14px;
            position: absolute;
            right: 0px;
            max-width: 90px;
            background: white;
            border: 2px solid rgba(0, 0, 0, 0.1);
            padding: 0.4em 0.7em;
            border-radius: 4px;
            transform: translate(100%, -50%);
        }
        
        .band {
            /* display: none; */
            position: absolute;
            left: 33px;
            width: 100%;
            top: 0;
            height: 20%;
            mix-blend-mode: screen;
        }
        
        .good {
            background-color: green;
        }
        
        .average {
            top: 20%;
            height: 40%;
            background-color: #e58a2a
        }
        
        .bad {
            top: 60%;
            height: 30%;
            background-color: #e6191d;
        }
    </style>
</head>

<body>
    <div class="chart">
        <div class="chart-wrap">
            <div class="band good"><span></span> </div>
            <div class="band average"><span></span></div>
            <div class="band bad"><span></span></div>
            <canvas id="myChart" width="400" height="200"></canvas>
            <div class="chart-target" data-label="80% target"></div>
        </div>
    </div>
    <script>
        var ctx = document.getElementById('myChart');

        const genericOptions = {
            responsive: true,
            maintainAspectRatio: true,
            layout: {
                padding: 0
            },
            scales: {
                y: {
                    min: 0,
                    max: 100,
                    grid: {
                        display: false
                    }
                },
                x: {
                    grid: {
                        color: '#eee'
                    }
                }
            },
            plugins: {
                tooltip: {
                    enabled: false,
                    external: function(context) {
                        console.log(context);
                    }
                }
            }
        };
        const lineoptions = {
            pointBorderWidth: 2,
            pointRadius: 2,
            pointBorderWidth: 5,
            pointBackgroundColor: 'white',
            tension: 0.1
        };

        const config = {
            type: 'line',
            data: {
                labels: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
                datasets: [{
                        label: 'Good',
                        data: [65, 59, 77, 77, 48, 66, 57, 40, 55, 59, 70, 100, 48, 56, 57, 40, 65],
                        borderColor: 'green',
                        pointBorderColor: "green",
                        ...lineoptions

                    },

                    {
                        label: 'Average',
                        data: [16, 15, 17, 17, 14, 15, 15, 14, 16, 15, 17, 17, 14, 15, 15, 14, 16],
                        borderColor: '#e58a2a',
                        pointBorderColor: "#e58a2a",
                        ...lineoptions
                    }, {
                        label: 'Bad',
                        data: [6, 5, 7, 7, 4, 5, 5, 4, 6, 5, 7, 7, 4, 5, 5, 4, 6],
                        borderColor: '#e6191d',
                        pointBorderColor: "#e6191d",
                        ...lineoptions
                    }

                ]
            },
            options: genericOptions
        };
        Chart.defaults.plugins.legend.display = false;
        Chart.defaults.scale.display = false;
        var myChart = new Chart(ctx, config);
    </script>
</body>

</html>